### 读书笔记

<div>
 <font face="楷体" size = 5px>
 索引是数据库系统里面最重要的概念之一。<p>
 索引的出现其实就是为了提高数据的查询效率，就像书的目录一样。


 </font>
</div>

### 索引的常见模型

索引的出现是为了提高查询效率，但是实现索引的方式却有很多种，所以就有了索引模型的概念。常见的比较简单的用于提高读写效率的数据结构：哈希表、有序数组和搜索树。

#### 哈希表

哈希表是一种以键值存储数据的结构，只要输入待查找的值即Key，就可以找到其对应的值即Value。哈希的思路是，把值放在数组里，用一个哈希函数把key换算成一个确定的位置，然后把value放在数组的这个位置。多个key值经过哈希函数的换算，会出现同一个值的情况。处理这种情况的一种方法是，拉出一个链表。如下图所示。

![avatar](https://github.com/PhiloLi/MYSQL-/blob/master/photo/%E5%93%88%E5%B8%8C%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84001.png?raw=true)



 如上图所示，user2和user4的key计算出来的hash值都是N。这是，查找user2的步骤是，1）根据user2计算出来N；2）按照顺序遍历，找到user2.

需要注意的是，key值在存储时，并不是有序的，这样的优点是新增一个数据的速度会很快，缺点是做区间查询到速度是很慢的。

所以，哈希表这种结构适用于等值查询的场景，不适用于区间查询。



#### 有序数组

有序数组在等值查询和范围查询场景中的性能都很优秀。存储如下图所示：如果查询User2的姓名，通过二分查找可以快速得到。

![](https://github.com/PhiloLi/MYSQL-/blob/master/photo/%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84%E5%AD%98%E5%82%A8001.png?raw=true)

有序数组索引的优点是同时适合等值查询和范围查询场景，查询性能优越；缺点是，在更新数据时，效率很差，当向数组中插入一个数据时，需要挪动后面的所有记录。

所以，有序数组索引适用于静态存储引擎。





#### 二叉树存储

二叉搜索树存储的示意图如下：

![](https://github.com/PhiloLi/MYSQL-/blob/master/photo/%E4%BA%8C%E5%8F%89%E6%A0%91%E5%AD%98%E5%82%A8001.png?raw=true)

二叉搜索树的特点是：每个节点的左儿子小于根节点，有儿子大于根节点。这样查询一个数据的时间复杂度为O(log(N))。为了保证树的平衡，更新树的时间复杂度也是O(log(N))。



哈希表，有序数组，N叉树，跳表、LSM树等数据结构都被用于引擎结构中。数据库底层存储的核心就是基于这些数据结构的。分析数据库的适用场景，需要先关注该数据库的数据模型。



### InnoDB的存储引擎

在MYSQL中，索引是存储引擎层实现的。在InnoDB中，表都是根据主键顺序以索引的形式存放的，
















